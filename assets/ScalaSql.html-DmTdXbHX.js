import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as h,o as n}from"./app-Cyt8kdYu.js";const t={};function k(B,s){return n(),a("div",null,s[0]||(s[0]=[h(`<h1 id="scalasql" tabindex="-1"><a class="header-anchor" href="#scalasql"><span>ScalaSql</span></a></h1><p>To compare Molecule with ScalaSql we implement the <a href="https://github.com/com-lihaoyi/scalasql/blob/main/docs/tutorial.md" target="_blank" rel="noopener noreferrer">ScalaSql Tutorial</a> to see the differences.</p><h2 id="scalasql-setup" tabindex="-1"><a class="header-anchor" href="#scalasql-setup"><span>ScalaSql setup</span></a></h2><p>In ScalaSql you need to both define the SQL Schema and a Scala Model that matches the SQL Schema:</p><h4 id="scalasql-db-schema" tabindex="-1"><a class="header-anchor" href="#scalasql-db-schema"><span>ScalaSql db schema</span></a></h4><div class="language-sql" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> IF</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> NOT</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> city</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    id          </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">integer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    countrycode </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">character</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    district    </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  integer</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> IF</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> NOT</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> country</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    code           </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">character</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">           varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    continent      </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    region         </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    surfacearea    </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">real</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">         NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    indepyear      </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">smallint</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">     integer</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    lifeexpectancy </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">real</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    gnp            </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">numeric</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    gnpold         </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">numeric</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    localname      </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    governmentform </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    headofstate    </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    capital        </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">integer</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    code2          </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">character</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> IF</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> NOT</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> countrylanguage</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    countrycode </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">character</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    language</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    varchar</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    isofficial  </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    percentage</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  real</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">         NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h4 id="scalasql-schema-model" tabindex="-1"><a class="header-anchor" href="#scalasql-schema-model"><span>ScalaSql Schema Model</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[_]](</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  continent</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  region</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  surfaceArea</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  indepYear</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  population</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  lifeExpectancy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Double</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  gnp</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[scala.math.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BigDecimal</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  gnpOld</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[scala.math.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BigDecimal</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  localName</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  governmentForm</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  headOfState</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  capital</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  code2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Table</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[_]](</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  id</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  name</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  countryCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  district</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  population</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Table</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CountryLanguage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[_]](</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  countryCode</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  language</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  isOfficial</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Boolean</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">  percentage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Double</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CountryLanguage</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Table</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CountryLanguage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]()</span></span></code></pre></div><h2 id="molecule-setup" tabindex="-1"><a class="header-anchor" href="#molecule-setup"><span>Molecule setup</span></a></h2><p>In Molecule you simply define the structure of your domain with Entities and their Attributes.</p><ul><li>No type parameters</li><li>Single trait for each domain entity (instead of both case class and object)</li></ul><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">object</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> World</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> DomainStructure</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  trait</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> code</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">           =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">           =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> continent</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">      =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> region</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">         =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> surfaceArea</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneInt</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> indepYear</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">      =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneInt</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> population</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">     =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneLong</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> lifeExpectancy</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneDouble</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> gnp</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">            =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneBigDecimal</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> gnpOld</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">         =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneBigDecimal</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> localName</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">      =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> governmentForm</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> headOfState</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> capital</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">        =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> one[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> code2</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">          =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  trait</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">        =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> countryCode</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> district</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> population</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">  =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneLong</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> country</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">     =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> one[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  trait</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CountryLanguage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> countryCode</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> language</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">    =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneString</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> isOfficial</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">  =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneBoolean</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> percentage</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">  =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> oneDouble</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> country</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">     =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> one[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>From this model, Molecule generates</p><ul><li>An SQL schema that we can transact to create the database</li><li>Boilerplate code to write molecule queries and transactions</li></ul><p>An important difference is also that with Molecule you don&#39;t need to decide upfront wether an attribute can be optional. You can enforce mandatory values though by adding <code>mandatory</code> after the type definition. If for instance we wanted to enforce that a code of a Country is mandatory, we could define <code>val code = oneString.mandatory</code>. For all definition options, see <a href="/docs/setup/domain-structure#attribute-options">Domain Structure</a>.</p><h2 id="select" tabindex="-1"><a class="header-anchor" href="#select"><span>Select</span></a></h2><p>ScalaSql maps data to a Model type like <code>City</code>, equivalent of <code>select * from City</code>:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ScalaSql</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query).take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kabul&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Kabol&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1780000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Qandahar&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Qandahar&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 237500</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Herat&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Herat&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 186800</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>This means that you will often over-fetch data with ScalaSql if not all attribute values of a Table are needed.</p><p>In Molecule you instead choose exactly which attributes you need and what order you want them in:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Molecule</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name.countryCode.district.population.query.get.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kabul&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kabol&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1780000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Qandahar&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Qandahar&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">237500</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Herat&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Herat&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">186800</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// or</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode.name.population.query.get.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;ABW&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Oranjestad&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">29034</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Herat&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">186800</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;AFG&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kabul&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1780000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// etc..</span></span></code></pre></div><h2 id="filter" tabindex="-1"><a class="header-anchor" href="#filter"><span>Filter</span></a></h2><h4 id="single-filter" tabindex="-1"><a class="header-anchor" href="#single-filter"><span>Single filter</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Molecule applies a filter directly to the attribute.</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).countryCode.district.population</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get.head ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="by-id" tabindex="-1"><a class="header-anchor" href="#by-id"><span>By ID</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.id === </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).name.countryCode.district.population</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get.head ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="multiple-filters" tabindex="-1"><a class="header-anchor" href="#multiple-filters"><span>Multiple filters</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(c =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  c.population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 5000000</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> c.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// or </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 5000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query).take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1890</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Shanghai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Shanghai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 9696300</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1891</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Peking&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Peking&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 7472000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>In Molecule you neither need references to a Table but instead apply filters directly to the Attributes:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district.population.</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1890</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Shanghai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Shanghai&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">9696300</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1891</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Peking&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Peking&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7472000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="lifting" tabindex="-1"><a class="header-anchor" href="#lifting"><span>Lifting</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> find</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cityId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.id === cityId))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">find(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">find(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3209</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3209</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bratislava&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SVK&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bratislava&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">448292</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> find</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cityId</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id(cityId).name.countryCode.district.population.query.get</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">find(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">find(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3209</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3209</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bratislava&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SVK&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bratislava&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">448292</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span></code></pre></div><h4 id="or-logic" tabindex="-1"><a class="header-anchor" href="#or-logic"><span>OR logic</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(c =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    db.values(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kuala Lumpur&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jakarta&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)).contains(c.name)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map(_.countryCode)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;IDN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;MYS&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Kuala Lumpur&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jakarta&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).countryCode</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;IDN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;MYS&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="mapping" tabindex="-1"><a class="header-anchor" href="#mapping"><span>Mapping</span></a></h2><h4 id="tuple2" tabindex="-1"><a class="header-anchor" href="#tuple2"><span>Tuple2</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.map(c =&gt; (c.name, c.continent))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query).take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Afghanistan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Asia&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Netherlands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Europe&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Netherlands Antilles&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;North America&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Albania&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Europe&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Algeria&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Africa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.continent.query.get.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Afghanistan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Asia&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Albania&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Europe&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Algeria&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Africa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;American Samoa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Oceania&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Andorra&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Europe&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>(Without sorting, results differ)</p><h4 id="heterogeneous-tuple" tabindex="-1"><a class="header-anchor" href="#heterogeneous-tuple"><span>Heterogeneous tuple</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map(c =&gt; (c, c.name.toUpperCase, c.population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .single</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    &quot;SINGAPORE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // population in millions</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  )</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).countryCode.district.population.query.get.map {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> c@(_, name, _, _, population) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    (c, name.toUpperCase, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}.head ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    &quot;SINGAPORE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // population in millions</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  )</span></span></code></pre></div><h2 id="aggregate" tabindex="-1"><a class="header-anchor" href="#aggregate"><span>Aggregate</span></a></h2><h4 id="sum" tabindex="-1"><a class="header-anchor" href="#sum"><span>sum</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).map(_.population).sum</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">175953614</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;CHN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).population(sum).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">175953614</span></span></code></pre></div><h4 id="sumby" tabindex="-1"><a class="header-anchor" href="#sumby"><span>sumBy</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.sumBy(_.population)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1429559884</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.population(sum).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1429559884</span></span></code></pre></div><h4 id="size" tabindex="-1"><a class="header-anchor" href="#size"><span>size</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).size</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">154</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id(count).population_.</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">154</span></span></code></pre></div><h4 id="aggregates" tabindex="-1"><a class="header-anchor" href="#aggregates"><span>aggregates</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .aggregate(cs =&gt; (</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    cs.minBy(_.population),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    cs.avgBy(_.population),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    cs.maxBy(_.population)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  ))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">25434098</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1277558000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .population(min)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .population(avg)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .population(max)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get.head ==&gt; (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">25434098.11715481</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1277558000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="sort-drop-take" tabindex="-1"><a class="header-anchor" href="#sort-drop-take"><span>Sort/Drop/Take</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .sortBy(_.population)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .desc</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .drop(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map(c =&gt; (c.name, c.population))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Karachi&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">9269265</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Istanbul&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8787958</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Ciudad de Mxico&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8591309</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Moscow&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8389200</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New York&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8008278</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.population.d1 </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// sort descending</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.offset(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).limit(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).get._1 ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Karachi&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">9269265</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Istanbul&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8787958</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Ciudad de Mxico&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8591309</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Moscow&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8389200</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New York&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">8008278</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="casting" tabindex="-1"><a class="header-anchor" href="#casting"><span>Casting</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map(_.lifeExpectancy.cast[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .single</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">80</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).lifeExpectancy</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get.head.toInt ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">80</span></span></code></pre></div><h2 id="nullable" tabindex="-1"><a class="header-anchor" href="#nullable"><span>Nullable</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.capital.isEmpty)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .size</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.capital_().id(count).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7</span></span></code></pre></div><h2 id="optional" tabindex="-1"><a class="header-anchor" href="#optional"><span>Optional</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query2</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.capital === </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.empty[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .size</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query2) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// this doesn&#39;t seem useful</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter(_.capital \`=\` </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.empty[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Int</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .size</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.capital_?(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).id(count).query.get.head ==&gt; (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="joins" tabindex="-1"><a class="header-anchor" href="#joins"><span>Joins</span></a></h2><h4 id="inner" tabindex="-1"><a class="header-anchor" href="#inner"><span>inner</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .join(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)(_.countryCode === _.code)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (city, country) =&gt; country.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Liechtenstein&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (city, country) =&gt; city.name }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> for</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  city &lt;- </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  country &lt;- </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.join(city.countryCode === _.code)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> country.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Liechtenstein&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">yield</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> city.name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Liechtenstein&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="right" tabindex="-1"><a class="header-anchor" href="#right"><span>right</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .rightJoin(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)(_.countryCode === _.code)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (cityOpt, country) =&gt; cityOpt.isEmpty(_.id) }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (cityOpt, country) =&gt; (cityOpt.map(_.name), country.name) }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Antarctica&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bouvet Island&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;British Indian Ocean Territory&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South Georgia and the South Sandwich Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Heard Island and McDonald Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;French Southern territories&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United States Minor Outlying Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Define an optional entity with an empty relationship value <code>City.country_()</code> to get the Countries that don&#39;t have a city entity pointing to them:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.?(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.country_()).</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Antarctica&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bouvet Island&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;British Indian Ocean Territory&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;French Southern territories&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Heard Island and McDonald Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South Georgia and the South Sandwich Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United States Minor Outlying Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="left" tabindex="-1"><a class="header-anchor" href="#left"><span>left</span></a></h4><p>(No ScalaSql example)</p><p>Left join with Molecule where some Countries don&#39;t have a Capital:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.startsWith(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Un&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Capital</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.?(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United Arab Emirates&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Some</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Abu Dhabi&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United Kingdom&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Some</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;London&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United States&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Some</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Washington&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;United States Minor Outlying Islands&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// no relationship</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="subqueries" tabindex="-1"><a class="header-anchor" href="#subqueries"><span>Subqueries</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> CountryLanguage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .join(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.sortBy(_.population).desc.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))(_.countryCode === _.code)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (language, country) =&gt; (language.language, country.name) }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .sortBy(_._1)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query).take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Asami&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bengali&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Chinese&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Dong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Gujarati&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Molecule doesn&#39;t support explicit subqueries although some molecules translate to subqueries internally. In this case, two queries can be used to retrieve the same result:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Fetch ids of 2 most populated countries</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> top2</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.population.d1.query.limit(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).get.map(_._1)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Fetch first 5 languages of those countries</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">CountryLanguage</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.language.a1.</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id_(top2).name.query.limit(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Asami&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bengali&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Chinese&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Dong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Gujarati&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>... or make a subquery with a raw SQL query:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">rawQuery(</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">  &quot;&quot;&quot;SELECT countrylanguage1.language AS res_0, subquery0.name AS res_1</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |FROM (SELECT</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |    country0.code AS code,</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |    country0.name AS name,</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |    country0.population AS population</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  FROM country country0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  ORDER BY population DESC</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  LIMIT 2) subquery0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |JOIN countrylanguage countrylanguage1</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |ON (subquery0.code = countrylanguage1.countrycode)</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |ORDER BY res_0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |LIMIT 5</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |&quot;&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.stripMargin</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Asami&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bengali&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Chinese&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Dong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Gujarati&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="union-except-intersect" tabindex="-1"><a class="header-anchor" href="#union-except-intersect"><span>Union/Except/Intersect</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> largestCountries</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.sortBy(_.name).sortBy(_.population).desc.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).map(_.name)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> smallestCountries</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.sortBy(_.name).sortBy(_.population).asc.take(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).map(_.name)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> smallestCountries.union(largestCountries)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Antarctica&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bouvet Island&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Molecule doesn&#39;t support union/except/intercept semantics. Instead, two queries can be used:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// (need to sort by Country name too since several countries have 0 inhabitants)</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.a2.population.a1.query.limit(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).get.map(_._1) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Antarctica&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bouvet Island&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.population.d1.query.limit(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).get.map(_._1) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>... or a raw query:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">rawQuery(</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">  &quot;&quot;&quot;SELECT subquery0.res AS res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |FROM (SELECT country0.name AS res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  FROM country country0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  ORDER BY country0.population ASC, res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  LIMIT 2) subquery0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |UNION</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |SELECT subquery0.res AS res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |FROM (SELECT country0.name AS res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  FROM country country0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  ORDER BY country0.population DESC, res</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |  LIMIT 2) subquery0</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |LIMIT 5</span></span>
<span class="line"><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">    |&quot;&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.stripMargin</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).flatten ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Antarctica&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Bouvet Island&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;China&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;India&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="window-functions" tabindex="-1"><a class="header-anchor" href="#window-functions"><span>Window functions</span></a></h2><p>Molecule doesn&#39;t support window functions. A raw query can be used instead as shown above.</p><h2 id="realistic-queries" tabindex="-1"><a class="header-anchor" href="#realistic-queries"><span>Realistic queries</span></a></h2><p>It could be argued that the complexity of the ScalaSql query constructions for the examples in this section in the tutorial start to be as complex as writing the SQL directly. So you might as well simply write a raw SQL query from the beginning without having to learn the advanced query constructs of ScalaSql. For instance it seems that you don&#39;t gain much from understanding/using this:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map(c =&gt; (c, db.rank().over.partitionBy(c.countryCode).sortBy(c.population).desc))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .subquery</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .filter { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (city, r) =&gt; r </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (city, r) =&gt; (city.name, city.population, city.countryCode, r) }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .join(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Country</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)(_._3 === _.code)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .sortBy(_._5.population)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .desc</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .map { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (name, population, countryCode, r, country) =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    (name, population, countryCode, r)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span></code></pre></div><p>compared to this:</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_0_name</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_0,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">       subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_0_population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_1,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">       subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_0_countrycode</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_2,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">       subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_1</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">             AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_3</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> city0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_0_name,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">             city0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">countrycode</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_0_countrycode,</span></span>
<span class="line"><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">             city0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_0_population,</span></span>
<span class="line"><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">             RANK</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()               </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">OVER</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">PARTITION</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> BY</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> city0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">countrycode</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> ORDER BY</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> city0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> DESC</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> res_1</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      FROM</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> city city0) subquery0</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">         JOIN</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> country country1 </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_0_countrycode</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> country1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">code</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">subquery0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">res_1</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> &lt;=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> country1</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">population</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> DESC</span></span></code></pre></div><h2 id="inserts" tabindex="-1"><a class="header-anchor" href="#inserts"><span>Inserts</span></a></h2><h4 id="single-row" tabindex="-1"><a class="header-anchor" href="#single-row"><span>Single row</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.insert.columns( </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ID provided by database AUTO_INCREMENT</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  _.name := </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  _.countryCode := </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  _.district := </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  _.population := </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4080</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Insert a single row by calling <code>save</code> on a populated molecule:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .name(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .district(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .population(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).save.transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district.population.d1.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="batch" tabindex="-1"><a class="header-anchor" href="#batch"><span>Batch</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.insert.batched(_.name, _.countryCode, _.district, _.population)(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ID provided by database AUTO_INCREMENT</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Loyang&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;East&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">31337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jurong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;West&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">313373</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4080</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4081</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Loyang&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;East&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 31337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4082</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jurong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;West&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 313373</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Insert multiple rows to an <code>insert</code> molecule:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode.district.population.insert(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ID provided by database AUTO_INCREMENT</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Loyang&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;East&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">31337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jurong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;West&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">313373</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district.population.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4080</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Sentosa&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;South&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4081</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Loyang&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;East&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">31337</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4082</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Jurong&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;West&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">313373</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="arbitrary-data" tabindex="-1"><a class="header-anchor" href="#arbitrary-data"><span>Arbitrary data</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.insert.select(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  c =&gt; (c.name, c.countryCode, c.district, c.population),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .filter(_.name === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    .map(c =&gt; (</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Expr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New-&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> c.name, c.countryCode, c.district, </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Expr</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4080</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New-Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>With Molecule we would insert a list of tuples from a query result with the desired modifications:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode.district.population.insert(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).countryCode.query.get.map {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    case</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> (name, countryCode) =&gt; (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New-&quot;</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> name, countryCode, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0L</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.id.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district.population.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">4080</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;New-Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="updates" tabindex="-1"><a class="header-anchor" href="#updates"><span>Updates</span></a></h2><h4 id="static-values" tabindex="-1"><a class="header-anchor" href="#static-values"><span>static values</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .update(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .set(_.population := </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, _.district := </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UNKNOWN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;UNKNOWN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Filter entities to be updated with tacit attributes and apply new data to mandatory attributes:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UNKNOWN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).population(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).update.transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).district.population.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UNKNOWN&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="computed-values" tabindex="-1"><a class="header-anchor" href="#computed-values"><span>computed values</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .update(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  .set(c =&gt; c.population := (c.population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 5017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).population.</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1000000</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).update.transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).population.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">5017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h4 id="multiple-values" tabindex="-1"><a class="header-anchor" href="#multiple-values"><span>multiple values</span></a></h4><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.update(_ =&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).set(_.population := </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.renderSql(query) ==&gt; </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;UPDATE city SET population = ?&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;LIE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2445</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;LIE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">  City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">2446</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;LIE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>Filter all cities having a population value and then set it to 0 for all! Beware</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.population_.population(</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).update.transact</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;LIE&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).population.query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Schaan&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Vaduz&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><h2 id="deletes" tabindex="-1"><a class="header-anchor" href="#deletes"><span>Deletes</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">val</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> query</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.delete(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.renderSql(query) ==&gt; </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;DELETE FROM city WHERE (city.countrycode = ?)&quot;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span></code></pre></div><p>Filter entities to be updated with tacit attributes and apply new data to mandatory attributes:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name(count).countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).delete.transact</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.name(count).countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get.head ==&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">0</span></span></code></pre></div><h2 id="transactions" tabindex="-1"><a class="header-anchor" href="#transactions"><span>Transactions</span></a></h2><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  dbClient.transaction { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">implicit</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> db =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.delete(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  case</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*do nothing*/</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">dbClient.transaction { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">implicit</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> db =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Transactions in Molecule are usually called on a specific action (save/insert/update/delet molecule) like</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).delete.transact</span></span></code></pre></div><p>This commits immediately. If you want to transact and also check things with a query, you can use a <code>unitOfWork</code> that can be rolled back if an exception is thrown:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  unitOfWork {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).delete.transact</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  case</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> _</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; ()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p><code>unitOfWork</code> doesn&#39;t have a handle to manually rollback. For this, use a savepoint (see below).</p><h4 id="savepoints" tabindex="-1"><a class="header-anchor" href="#savepoints"><span>Savepoints</span></a></h4><p>In ScalaSql, a <code>savepoint</code> block executes inside a <code>transaction</code> block. It has a handle that you can use to roll back the actions inside the savepoint body:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">dbClient.transaction { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">implicit</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> db =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  db.savepoint { </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">implicit</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> sp =&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.delete(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)) ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    sp.rollback()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  db.run(</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.select.filter(_.countryCode === </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).single) ==&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Sc</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">3208</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;Singapore&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, district </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, population </span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 4017733</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>You can do the same in Molecule, except that the savepoint block is inside a <code>unitOfWork</code> block:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">unitOfWork {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  savepoint { sp =&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).delete.transact</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">    City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    sp.rollback()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><p>A thrown exception also rolls back the savepoint actions:</p><div class="language-scala" data-highlighter="shiki" data-ext="scala" data-title="scala" style="--shiki-light:#abb2bf;--shiki-dark:#abb2bf;--shiki-light-bg:#282c34;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  unitOfWork {</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    savepoint { _ =&gt;</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode_(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).delete.transact</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">      City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">      throw</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">  case</span><span style="--shiki-light:#E06C75;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> _</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; ()</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">City</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">.countryCode(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">).query.get ==&gt; </span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Seq</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&quot;SGP&quot;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span></code></pre></div><hr><p>Molecule doesn&#39;t implement custom expressions or Type Mappings.</p>`,148)]))}const e=i(t,[["render",k],["__file","ScalaSql.html.vue"]]),r=JSON.parse('{"path":"/database/compare/tutorials/ScalaSql.html","title":"ScalaSql","lang":"en-US","frontmatter":{"description":"ScalaSql To compare Molecule with ScalaSql we implement the ScalaSql Tutorial to see the differences. ScalaSql setup In ScalaSql you need to both define the SQL Schema and a Sca...","head":[["meta",{"property":"og:url","content":"https://www.scalamolecule.org/intro/database/compare/tutorials/ScalaSql.html"}],["meta",{"property":"og:site_name","content":"Molecule"}],["meta",{"property":"og:title","content":"ScalaSql"}],["meta",{"property":"og:description","content":"ScalaSql To compare Molecule with ScalaSql we implement the ScalaSql Tutorial to see the differences. ScalaSql setup In ScalaSql you need to both define the SQL Schema and a Sca..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ScalaSql\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"ScalaSql setup","slug":"scalasql-setup","link":"#scalasql-setup","children":[]},{"level":2,"title":"Molecule setup","slug":"molecule-setup","link":"#molecule-setup","children":[]},{"level":2,"title":"Select","slug":"select","link":"#select","children":[]},{"level":2,"title":"Filter","slug":"filter","link":"#filter","children":[]},{"level":2,"title":"Lifting","slug":"lifting","link":"#lifting","children":[]},{"level":2,"title":"Mapping","slug":"mapping","link":"#mapping","children":[]},{"level":2,"title":"Aggregate","slug":"aggregate","link":"#aggregate","children":[]},{"level":2,"title":"Sort/Drop/Take","slug":"sort-drop-take","link":"#sort-drop-take","children":[]},{"level":2,"title":"Casting","slug":"casting","link":"#casting","children":[]},{"level":2,"title":"Nullable","slug":"nullable","link":"#nullable","children":[]},{"level":2,"title":"Optional","slug":"optional","link":"#optional","children":[]},{"level":2,"title":"Joins","slug":"joins","link":"#joins","children":[]},{"level":2,"title":"Subqueries","slug":"subqueries","link":"#subqueries","children":[]},{"level":2,"title":"Union/Except/Intersect","slug":"union-except-intersect","link":"#union-except-intersect","children":[]},{"level":2,"title":"Window functions","slug":"window-functions","link":"#window-functions","children":[]},{"level":2,"title":"Realistic queries","slug":"realistic-queries","link":"#realistic-queries","children":[]},{"level":2,"title":"Inserts","slug":"inserts","link":"#inserts","children":[]},{"level":2,"title":"Updates","slug":"updates","link":"#updates","children":[]},{"level":2,"title":"Deletes","slug":"deletes","link":"#deletes","children":[]},{"level":2,"title":"Transactions","slug":"transactions","link":"#transactions","children":[]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"filePathRelative":"database/compare/tutorials/ScalaSql.md","autoDesc":true}');export{e as comp,r as data};
